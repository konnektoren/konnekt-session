= Architecture Decision Records
:icons: font
:toc: left
:toclevels: 2
:sectnums:

== What is an ADR?

An **Architecture Decision Record** (ADR) captures an important architectural decision made along with its context and consequences.

ADRs help teams:

* **Understand why** decisions were made, especially when revisiting them later
* **Evaluate trade-offs** explicitly rather than implicitly
* **Onboard new developers** by documenting the reasoning behind key choices
* **Avoid repeating discussions** by providing a reference point

== Format

Each ADR in this directory follows the **Michael Nygard format**:

[cols="1,3", options="header"]
|===
|Section
|Purpose

|**Title**
|Short present-tense imperative statement (e.g., "Use Rust for Implementation")

|**Status**
|Proposed \| Accepted \| Deprecated \| Superseded

|**Context**
|The issue motivating this decision, including constraints and requirements

|**Decision**
|The change we're proposing or have agreed to implement

|**Consequences**
|Positive, negative, and neutral outcomes resulting from the decision
|===

== Index

[cols="1,4,2,2", options="header"]
|===
|ID |Title |Status |Date

|xref:0001-use-rust-for-implementation.adoc[ADR-0001]
|Use Rust for Implementation
|✅ Accepted
|2025-12-29

|xref:0002-use-yew-for-frontend.adoc[ADR-0002]
|Use Yew for Frontend Framework
|✅ Accepted
|2025-12-29

|xref:0003-use-matchbox-for-signaling.adoc[ADR-0003]
|Use Matchbox for WebRTC Signaling
|✅ Accepted
|2025-12-29

|xref:0004-use-client-side-key-generation-for-identity.adoc[ADR-0004]
|Use Client-Side Key Generation for Persistent Identity
|✅ Accepted
|2025-12-29

|xref:0005-use-tracing-for-logging-and-diagnostics.adoc[ADR-0005]
|Use Tracing for Logging and Diagnostics
|✅ Accepted
|2025-12-29

|xref:0006-use-cargo-workspace-for-modular-architecture.adoc[ADR-0006]
|Use Cargo Workspace for Modular Architecture
|✅ Accepted
|2025-12-29

|xref:0007-use-cucumber-for-behavior-driven-testing.adoc[ADR-0007]
|Use Cucumber for Behavior-Driven Testing
|✅ Accepted
|2025-12-29

|xref:0008-use-thiserror-for-domain-errors.adoc[ADR-0008]
|Use thiserror for Domain Errors
|✅ Accepted
|2025-12-29

|xref:0009-use-json-with-feature-gated-messagepack.adoc[ADR-0009]
|Use JSON with Feature-Gated MessagePack
|✅ Accepted
|2025-12-29

|xref:0010-use-event-sourcing-for-lobby-state.adoc[ADR-0010]
|Use Event Sourcing for Lobby State
|✅ Accepted
|2025-12-29

|xref:0011-use-std-async-for-wasm-compatibility.adoc[ADR-0011]
|Use std::future for WASM-Compatible Async
|✅ Accepted
|2025-12-29

|xref:0012-use-garde-for-domain-validation.adoc[ADR-0012]
|Use garde for Domain Validation
|✅ Accepted
|2025-12-29

|xref:0013-use-instant-for-cross-platform-time.adoc[ADR-0013]
|Use instant for Cross-Platform Time
|✅ Accepted
|2025-12-29

|xref:0014-use-localstorage-for-session-persistence.adoc[ADR-0014]
|Use localStorage for Session Persistence
|✅ Accepted
|2025-12-29

|xref:0015-use-feature-gated-event-cache.adoc[ADR-0015]
|Use Feature-Gated Event Cache
|✅ Accepted
|2025-12-29

|xref:0016-use-clap-for-cli-tooling.adoc[ADR-0016]
|Use Clap for CLI Tooling
|✅ Accepted
|2025-12-29
|===

== Guidelines for Writing ADRs

When creating a new ADR:

1. **Number sequentially** – Use the next available number (e.g., `0005-...`)
2. **Use imperative mood** – "Use X" not "Using X" or "We will use X"
3. **Document alternatives** – Show what was considered and why it was rejected
4. **Be honest about trade-offs** – Every decision has downsides
5. **Link to related docs** – Reference DDD docs, code, or external resources
6. **Keep it concise** – Aim for 1-2 pages; details can go in separate docs

== When to Write an ADR

Write an ADR when making decisions that:

* **Affect multiple components** or the entire system
* **Are difficult to reverse** (e.g., choice of programming language)
* **Have significant trade-offs** that need to be understood
* **Impact non-functional requirements** (performance, security, scalability)
* **Require explanation** to future team members

== Template

When creating a new ADR, copy this template:

[source,adoc]
----
= ADR-XXXX: [Decision Title]

**Status**: Proposed +
**Date**: YYYY-MM-DD +
**Deciders**: [Names/Roles]

== Context

[Describe the issue and constraints]

=== Alternatives Considered

==== [Alternative 1]
* ✅ Pros
* ❌ Cons

==== [Alternative 2]
* ✅ Pros
* ❌ Cons

== Decision

We will [decision statement].

=== Rationale

[Explain why this decision was made]

== Consequences

=== Positive

* [Good outcome 1]
* [Good outcome 2]

=== Negative

* [Drawback 1]
* [Drawback 2]

=== Neutral

* [Neutral consequence 1]
----

== References

* **ADR GitHub Organization** – https://adr.github.io/
* **Michael Nygard's original post** – https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions
* **ADR Tools** – https://github.com/npryce/adr-tools
